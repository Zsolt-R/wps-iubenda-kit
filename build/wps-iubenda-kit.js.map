{"version":3,"file":"wps-iubenda-kit.js","mappings":"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","sources":["webpack://wps-animate/webpack/bootstrap","webpack://wps-animate/webpack/runtime/make namespace object","webpack://wps-animate/./src/wps-iubenda-kit.js","webpack://wps-animate/./src/wps-iubenda-kit.css"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","function getYouTubeVideoID(url) {\n\tconst videoID = url.match(\n\t\t/^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/,\n\t);\n\treturn videoID[2];\n}\n\nfunction getCookie(cookieName) {\n\tlet cookieValue = document.cookie,\n\t\tcookieStart = cookieValue.indexOf(' ' + cookieName + '=');\n\tif (cookieStart === -1) cookieStart = cookieValue.indexOf(cookieName + '=');\n\tif (cookieStart === -1) {\n\t\tcookieValue = null;\n\t} else {\n\t\tcookieStart = cookieValue.indexOf('=', cookieStart) + 1;\n\t\tlet cookieEnd = cookieValue.indexOf(';', cookieStart);\n\t\tif (cookieEnd === -1) {\n\t\t\tcookieEnd = cookieValue.length;\n\t\t}\n\t\tcookieValue = unescape(cookieValue.substring(cookieStart, cookieEnd));\n\t}\n\treturn cookieValue;\n}\n\nfunction getMessage() {\n\tconst currentLanguage = getCookie('wp-wpml_current_language');\n\tlet message = 'Accetta i cookie per vedere il contenuto.';\n\tif (currentLanguage) {\n\t\tif (\n\t\t\t'en' === currentLanguage ||\n\t\t\t'fr' === currentLanguage ||\n\t\t\t'de' === currentLanguage\n\t\t) {\n\t\t\tmessage = 'Accept cookies to see content.';\n\t\t}\n\t}\n\n\treturn message;\n}\n\nfunction createWrapperUI(item, iubendaButton) {\n\tconst wrapper = document.createElement('div');\n\tconst inner = document.createElement('div');\n\twrapper.classList.add('wps-iub-locked-wrapper');\n\tinner.classList.add('wps-iub-locked-button');\n\tinner.innerHTML = `<span class=\"message\">${getMessage()}</span>`;\n\n\tinner.addEventListener('click', function () {\n\t\tiubendaButton.click();\n\t});\n\n\t// Check the suppressedsrc attribute value string contains https://www.youtube.com or https://www.google.com/maps\n\tif (item?.attributes?.suppressedsrc?.value) {\n\t\tif (\n\t\t\titem.attributes.suppressedsrc.value.includes(\n\t\t\t\t'https://www.youtube.com',\n\t\t\t)\n\t\t) {\n\t\t\tconst videoID = getYouTubeVideoID(\n\t\t\t\titem.attributes.suppressedsrc.value,\n\t\t\t);\n\n\t\t\twrapper.style.backgroundImage = `url(https://img.youtube.com/vi/${videoID}/maxresdefault.jpg)`;\n\t\t} else if (\n\t\t\titem.attributes.suppressedsrc.value.includes(\n\t\t\t\t'https://www.google.com/maps',\n\t\t\t)\n\t\t) {\n\t\t\twrapper.classList.add('wps-iub-locked-wrapper--is-map');\n\n\t\t\tif (item.attributes.height) {\n\t\t\t\twrapper.style.maxHeight = `${item.attributes.height.value}px`;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Insert the new node before the item\n\twrapper.appendChild(inner);\n\titem.parentNode.insertBefore(wrapper, item);\n\twrapper.appendChild(item);\n}\n\nfunction addIubendaNotice(iubendaButton) {\n\t/**\n\t * Find all elements with class _iub_cs_activate\n\t * Check if they have class _iub_cs_activate-activated\n\t * If not check the suppressedsrc attribute value string contains https://www.youtube.com or https://www.google.com/maps\n\t * If string is found wrap the item in <div class=\"wps-iub-locked-wrapper\"><div class=\"wps-iub-locked-button\">...</div></div>\n\t */\n\tconst content = document.querySelectorAll('iframe._iub_cs_activate');\n\n\tif (content.length > 0) {\n\t\tcontent.forEach((item) => {\n\t\t\tconst hasIubendaAccepted = item.classList.contains(\n\t\t\t\t'_iub_cs_activate-activated',\n\t\t\t);\n\n\t\t\tif (hasIubendaAccepted) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tcreateWrapperUI(item, iubendaButton);\n\t\t});\n\t}\n}\n\nfunction getIubendaButton() {\n\tconst iubendaButton = document.querySelector(\n\t\t'.iubenda-cs-preferences-link',\n\t);\n\treturn iubendaButton;\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n\t/**\n\t * Check if we have iubenda button and if not check again every 300ms for\n\t * a maximum of 10 times\n\t * If we have button add the notice\n\t */\n\tlet iubendaButton = getIubendaButton();\n\tlet i = 0;\n\tconst interval = setInterval(function () {\n\n\t\tconsole.log(iubendaButton);\n\t\tif (iubendaButton) {\n\t\t\tclearInterval(interval);\n\t\t\taddIubendaNotice(iubendaButton);\n\t\t} else {\n\t\t\tiubendaButton = getIubendaButton();\n\t\t\ti++;\n\t\t}\n\n\t\tif (i > 20) {\n\t\t\tclearInterval(interval);\n\t\t}\n\t}, 300);\n});\n","// extracted by mini-css-extract-plugin\nexport {};"],"names":["getYouTubeVideoID","url","videoID","match","getCookie","cookieName","cookieValue","document","cookie","cookieStart","indexOf","cookieEnd","length","unescape","substring","getMessage","currentLanguage","message","createWrapperUI","item","iubendaButton","wrapper","createElement","inner","classList","add","innerHTML","addEventListener","click","attributes","suppressedsrc","value","includes","style","backgroundImage","height","maxHeight","appendChild","parentNode","insertBefore","addIubendaNotice","content","querySelectorAll","forEach","hasIubendaAccepted","contains","getIubendaButton","querySelector","i","interval","setInterval","console","log","clearInterval"],"sourceRoot":""}